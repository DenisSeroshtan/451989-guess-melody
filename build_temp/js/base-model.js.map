{"version":3,"file":"base-model.js","sources":["js/base-model.js"],"sourcesContent":["export class BaseAdapter {\n  constructor() {\n    if (new.target === BaseAdapter) {\n      throw new Error();\n    }\n  }\n\n  preprocess(data) {\n    return data;\n  }\n\n  toServer(data) {\n    return data;\n  }\n}\n\nconst defaultAdapter = new class extends BaseAdapter {}();\n\nexport default class BaseModel {\n  get urlRead() {\n    throw new Error(`Abstract method. Define the URL for model.`);\n  }\n\n  get urlWrite() {\n    throw new Error(`Abstract method. Define the URL for model.`);\n  }\n\n  load(adapter = defaultAdapter) {\n    return fetch(this.urlRead)\n      .then((resp) => resp.json())\n      .then(adapter.preprocess);\n  }\n\n  send(data, adapter = defaultAdapter) {\n    const requestSettings = {\n      body: adapter.toServer(data),\n      headers: {\n        'Content-Type': `application/json`\n      },\n      method: `POST`\n    };\n\n    return fetch(this.urlWrite, requestSettings)\n      .then(this.onUpload);\n  }\n}\n"],"names":["BaseAdapter","new","target","Error","data","defaultAdapter","BaseModel","adapter","fetch","urlRead","then","resp","json","preprocess","requestSettings","toServer","urlWrite","onUpload"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAAaA,WAAb;yBACgB;;;QACRC,IAAIC,MAAJ,KAAeF,WAAnB,EAAgC;YACxB,IAAIG,KAAJ,EAAN;;;;;;+BAIOC,IAPb,EAOmB;aACRA,IAAP;;;;6BAGOA,IAXX,EAWiB;aACNA,IAAP;;;;;;AAIJ,IAAMC,iBAAiB;;;;;;;;;EAAkBL,WAAlB,IAAvB;;IAEqBM;;;;;;;2BASY;UAA1BC,OAA0B,uEAAhBF,cAAgB;;aACtBG,MAAM,KAAKC,OAAX,EACJC,IADI,CACC,UAACC,IAAD;eAAUA,KAAKC,IAAL,EAAV;OADD,EAEJF,IAFI,CAECH,QAAQM,UAFT,CAAP;;;;yBAKGT,MAAgC;UAA1BG,OAA0B,uEAAhBF,cAAgB;;UAC7BS,kBAAkB;cAChBP,QAAQQ,QAAR,CAAiBX,IAAjB,CADgB;iBAEb;;SAFa;;OAAxB;;aAQOI,MAAM,KAAKQ,QAAX,EAAqBF,eAArB,EACJJ,IADI,CACC,KAAKO,QADN,CAAP;;;;2BAvBY;YACN,IAAId,KAAJ,8CAAN;;;;2BAGa;YACP,IAAIA,KAAJ,8CAAN;;;;;;;;;"}
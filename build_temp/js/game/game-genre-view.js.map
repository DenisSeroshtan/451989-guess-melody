{"version":3,"file":"game-genre-view.js","sources":["js/view.js","js/game/game-genre-view.js"],"sourcesContent":["export default class AbstractView {\n\n  get template() {\n    throw new Error(`View should be defined`);\n  }\n\n  get element() {\n    if (!this._element) {\n      this.create();\n    }\n\n    return this._element;\n  }\n\n  render() {\n    return this.createElement(this.template);\n  }\n\n  bind() {\n\n  }\n\n  create() {\n    this._element = this.render();\n    this.bind();\n  }\n\n  createElement(template) {\n    const outer = document.createElement(`template`);\n    outer.innerHTML = template;\n    return outer.content;\n  }\n\n  show() {\n    const mainScreen = document.querySelector(`.main`);\n    mainScreen.innerHTML = ``;\n    mainScreen.appendChild(this.element);\n  }\n}\n","import AbstractView from '../view.js';\n\nexport default class GameGenreView extends AbstractView {\n\n  constructor(question) {\n    super();\n\n    this._question = question;\n  }\n\n  get template() {\n    return `<section class=\"main main--level main--level-genre\">\n    <div class=\"main-wrap\">\n      <h2 class=\"title\">${this._question.data.toLowerCase()}</h2>\n      <form class=\"genre\">\n        ${Array.prototype.slice.call(this._question.answers, 0).map((answer, index) =>\n           this.createSong(index, answer)\n        )}\n        <button class=\"genre-answer-send\" type=\"submit\">Ответить</button>\n      </form>\n    </div>\n  </section>`;\n  }\n\n  createSong(index, answer) {\n    return `<div class=\"genre-answer\">\n      <div class=\"player-wrapper\"></div>\n        <input type=\"checkbox\" name=\"answer\" value=\"answer-1\" id=\"a-${index}\">\n        <label class=\"genre-answer-check\" for=\"a-${index}\"></label>\n      </div>`;\n  }\n\n  onAnswer(...indexes) {\n\n  }\n\n  bind() {\n    const screenDom = this.element;\n\n    this.answers = Array.prototype.slice.call(screenDom.querySelectorAll(`.genre-answer`), 0);\n    this.answerButton = screenDom.querySelector(`.genre-answer-send`);\n\n    const playerWrappers = Array.prototype.slice.call(screenDom.querySelectorAll(`.player-wrapper`), 0);\n\n    playerWrappers.forEach((item, i) => {\n      item.addEventListener(`click`, (event) => {\n        event.preventDefault();\n\n        if (this.currentAudio) {\n          this.currentAudio.pause();\n        }\n\n        this.currentAudio = Array.prototype.slice.call(item.querySelectorAll(`audio`))[0];\n      });\n\n      window.initializePlayer(item, Array.prototype.slice.call(this._question.answers, 0)[i].file, false, true);\n    });\n\n    this.answers.forEach((item) => {\n      const checkbox = item.querySelector(`input`);\n\n      checkbox.addEventListener(`click`, () => {\n        this.answerClickHandler();\n      });\n    });\n\n    this.answerButton.disabled = true;\n\n    this.answerButton.onclick = (event) => {\n      event.preventDefault();\n\n      const answerIndexes = [];\n      Array.prototype.slice.call(this.answers, 0).forEach((item, i, array) => {\n        if (this.answers[i].querySelector(`input`).checked) {\n          answerIndexes.push(i);\n        }\n      });\n\n      this.onAnswer(...answerIndexes);\n    };\n  }\n\n  answerClickHandler() {\n    this.answerButton.disabled = false;\n  }\n\n}\n"],"names":["AbstractView","createElement","template","_element","render","bind","outer","document","innerHTML","content","mainScreen","querySelector","appendChild","element","Error","create","GameGenreView","question","_question","index","answer","screenDom","answers","Array","prototype","slice","call","querySelectorAll","answerButton","playerWrappers","forEach","item","i","addEventListener","event","preventDefault","currentAudio","pause","initializePlayer","file","checkbox","answerClickHandler","disabled","onclick","answerIndexes","array","checked","push","onAnswer","data","toLowerCase","map","createSong"],"mappings":"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"}
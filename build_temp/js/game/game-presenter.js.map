{"version":3,"file":"game-presenter.js","sources":["js/view.js","js/game/game-genre-view.js","js/game/game-artist-view.js","js/utils.js","js/base-model.js","js/game/game-model.js","js/data.js","js/welcome/welcome-view.js","js/welcome/welcome-presenter.js","js/result/result-success-view.js","js/result/result-fail-view.js","js/result/result-model.js","js/result/result-presenter.js","js/timer-view.js","js/application.js","js/game/game-presenter.js"],"sourcesContent":["export default class AbstractView {\n\n  get template() {\n    throw new Error(`View should be defined`);\n  }\n\n  get element() {\n    if (!this._element) {\n      this.create();\n    }\n\n    return this._element;\n  }\n\n  render() {\n    return this.createElement(this.template);\n  }\n\n  bind() {\n\n  }\n\n  create() {\n    this._element = this.render();\n    this.bind();\n  }\n\n  createElement(template) {\n    const outer = document.createElement(`template`);\n    outer.innerHTML = template;\n    return outer.content;\n  }\n\n  show() {\n    const mainScreen = document.querySelector(`.main`);\n    mainScreen.innerHTML = ``;\n    mainScreen.appendChild(this.element);\n  }\n}\n","import AbstractView from '../view.js';\n\nexport default class GameGenreView extends AbstractView {\n\n  constructor(question) {\n    super();\n\n    this._question = question;\n  }\n\n  get template() {\n    return `<section class=\"main main--level main--level-genre\">\n    <div class=\"main-wrap\">\n      <h2 class=\"title\">${this._question.data.toLowerCase()}</h2>\n      <form class=\"genre\">\n        ${Array.prototype.slice.call(this._question.answers, 0).map((answer, index) =>\n           this.createSong(index, answer)\n        )}\n        <button class=\"genre-answer-send\" type=\"submit\">Ответить</button>\n      </form>\n    </div>\n  </section>`;\n  }\n\n  createSong(index, answer) {\n    return `<div class=\"genre-answer\">\n      <div class=\"player-wrapper\"></div>\n        <input type=\"checkbox\" name=\"answer\" value=\"answer-1\" id=\"a-${index}\">\n        <label class=\"genre-answer-check\" for=\"a-${index}\"></label>\n      </div>`;\n  }\n\n  onAnswer(...indexes) {\n\n  }\n\n  bind() {\n    const screenDom = this.element;\n\n    this.answers = Array.prototype.slice.call(screenDom.querySelectorAll(`.genre-answer`), 0);\n    this.answerButton = screenDom.querySelector(`.genre-answer-send`);\n\n    const playerWrappers = Array.prototype.slice.call(screenDom.querySelectorAll(`.player-wrapper`), 0);\n\n    playerWrappers.forEach((item, i) => {\n      item.addEventListener(`click`, (event) => {\n        event.preventDefault();\n\n        if (this.currentAudio) {\n          this.currentAudio.pause();\n        }\n\n        this.currentAudio = Array.prototype.slice.call(item.querySelectorAll(`audio`))[0];\n      });\n\n      window.initializePlayer(item, Array.prototype.slice.call(this._question.answers, 0)[i].file, false, true);\n    });\n\n    this.answers.forEach((item) => {\n      const checkbox = item.querySelector(`input`);\n\n      checkbox.addEventListener(`click`, () => {\n        this.answerClickHandler();\n      });\n    });\n\n    this.answerButton.disabled = true;\n\n    this.answerButton.onclick = (event) => {\n      event.preventDefault();\n\n      const answerIndexes = [];\n      Array.prototype.slice.call(this.answers, 0).forEach((item, i, array) => {\n        if (this.answers[i].querySelector(`input`).checked) {\n          answerIndexes.push(i);\n        }\n      });\n\n      this.onAnswer(...answerIndexes);\n    };\n  }\n\n  answerClickHandler() {\n    this.answerButton.disabled = false;\n  }\n\n}\n","import AbstractView from '../view.js';\n\nexport default class GameArtistView extends AbstractView {\n  constructor(question) {\n    super();\n\n    this._question = question;\n  }\n\n  get template() {\n    return `<section class=\"main main--level main--level-artist\">\n      <div class=\"main-wrap\">\n        <div class=\"main-timer\"></div>\n  \n        <h2 class=\"title main-title\">Кто исполняет эту песню?</h2>\n        <div class=\"player-wrapper\"></div>\n        <form class=\"main-list\">\n          ${Array.prototype.slice.call(this._question.answers, 0).map((answer, index) =>\n            this.createAnswer(index, answer)\n          )}\n        </form>\n      </div>\n    </section>`;\n  }\n\n  createAnswer(index, answer) {\n    return `<div class=\"main-answer-wrapper\">\n      <input class=\"main-answer-r\" type=\"radio\" id=\"answer-${index}\" name=\"answer\" value=\"${index}\" />\n      <label class=\"main-answer\" for=\"answer-1\">\n        <img class=\"main-answer-preview\" src=\"${answer.image}\">\n        ${answer.artistName}\n      </label> \n    </div>`;\n  }\n\n  onAnswer(...indexes) {\n\n  }\n\n  bind() {\n    const screenDom = this.element;\n    const answers = Array.prototype.slice.call(screenDom.querySelectorAll(`.main-answer-wrapper`), 0);\n    const player = screenDom.querySelector(`.player-wrapper`);\n\n    const artistSong = this._question.data;\n    window.initializePlayer(player, artistSong.file, true, true);\n\n    for (let answer of answers) {\n      answer.addEventListener(`click`, (event) => {\n        event.preventDefault();\n\n        const wrapperElement = event.currentTarget;\n        const index = wrapperElement.querySelector(`.main-answer-r`).value;\n        this.onAnswer(index);\n      });\n    }\n  }\n\n\n}\n","import gameModel from './game/game-model.js';\n\nexport function deepCopy(object) {\n  return JSON.parse(JSON.stringify(object));\n}\n\nconst preloadData = {};\nexport function preloadAudio(questions, successFunction, failFunction) {\n  preloadData.files = [];\n  preloadData.successFunction = successFunction;\n  preloadData.failFunction = failFunction;\n\n  for (let question of questions) {\n    switch (question.type) {\n      case gameModel.QuestionType.ARTIST:\n        preloadData.files.push(question.data.file);\n        break;\n      case gameModel.QuestionType.GENRE:\n        preloadData.files = preloadData.files.concat(getFilesFromAnswers(question.answers));\n        break;\n    }\n  }\n\n  try {\n    loadFile();\n  } catch (error) {\n    preloadData.failFunction();\n  }\n}\n\nfunction loadFile() {\n  let player = new Audio();\n  player.addEventListener(`canplaythrough`, audioLoadedHandler);\n  if (preloadData.files[0]) {\n    player.src = preloadData.files[0];\n  } else {\n    audioLoadedHandler();\n  }\n}\n\nfunction audioLoadedHandler(event) {\n  preloadData.files.shift();\n\n  if (!preloadData.files.length) {\n    preloadData.successFunction();\n  } else {\n    loadFile();\n  }\n}\n\nfunction getFilesFromAnswers(answers) {\n  const returnArray = [];\n\n  for (let answer of answers) {\n    returnArray.push(answer.file);\n  }\n\n  return returnArray;\n}\n","export class BaseAdapter {\n  constructor() {\n    if (new.target === BaseAdapter) {\n      throw new Error();\n    }\n  }\n\n  preprocess(data) {\n    return data;\n  }\n\n  toServer(data) {\n    return data;\n  }\n}\n\nconst defaultAdapter = new class extends BaseAdapter {}();\n\nexport default class BaseModel {\n  get urlRead() {\n    throw new Error(`Abstract method. Define the URL for model.`);\n  }\n\n  get urlWrite() {\n    throw new Error(`Abstract method. Define the URL for model.`);\n  }\n\n  load(adapter = defaultAdapter) {\n    return fetch(this.urlRead)\n      .then((resp) => resp.json())\n      .then(adapter.preprocess);\n  }\n\n  send(data, adapter = defaultAdapter) {\n    const requestSettings = {\n      body: adapter.toServer(data),\n      headers: {\n        'Content-Type': `application/json`\n      },\n      method: `POST`\n    };\n\n    return fetch(this.urlWrite, requestSettings)\n      .then(this.onUpload);\n  }\n}\n","import {deepCopy} from '../utils.js';\nimport BaseModel from '../base-model.js';\nimport {BaseAdapter} from '../base-model.js';\n\nconst gameModelAdapter = new class extends BaseAdapter {\n  constructor() {\n    super();\n  }\n\n  preprocess(data) {\n    return data.map((item) => {\n      switch (item.type) {\n        case `artist`:\n          return {type: 1, data: {file: item.src}, answers: gameModelAdapter.proceedArtistAnswers(item.answers)};\n        case `genre`:\n          return {type: 2, data: item.question, answers: gameModelAdapter.proceedGenreAnswers(item.answers, item.genre)};\n      }\n\n      return {};\n    });\n  }\n\n  toServer(data) {\n    return JSON.stringify(data);\n  }\n\n  proceedArtistAnswers(answers) {\n    return answers.map((item) => {\n      return {valid: item.isCorrect, artistName: item.title, image: item.image.url};\n    });\n  }\n\n  proceedGenreAnswers(answers, correctGenre) {\n    return answers.map((item) => {\n      return {valid: item.genre === correctGenre ? true : false, file: item.src};\n    });\n  }\n}();\n\nclass GameModel extends BaseModel {\n\n  get urlRead() {\n    return `https://intensive-ecmascript-server-btfgudlkpi.now.sh/guess-melody/questions`;\n  }\n\n  get correctAnswers() {\n    return this.state.questions.reduce((sum, question) => {\n      return sum + (question.isUserAnswerCorrect ? 1 : 0);\n    }, 0);\n  }\n\n  get gameTime() {\n    return this.initState.time - this.state.time;\n  }\n\n  set timeLeft(value) {\n    this.state.time = value;\n\n    if (!this.state.time) {\n      this.onFinishGame();\n    }\n  }\n\n  get timeLeft() {\n    return this.state.time;\n  }\n\n  get lifes() {\n    return this.state.life;\n  }\n\n  get currentQuestion() {\n    return this.state.questions[this.state.currentIndex];\n  }\n\n  get stats() {\n    const stats = {};\n    stats.answers = this.correctAnswers;\n    stats.time = this.gameTime;\n\n    return stats;\n  }\n\n  get isFail() {\n    return !this.timeLeft || !this.lifes;\n  }\n\n  constructor() {\n    super();\n\n    this.QuestionType = {\n      ARTIST: 1,\n      GENRE: 2\n    };\n\n    this.questions = [];\n    this.initState = Object.freeze({\n      'time': 120,\n      'life': 3,\n      'currentIndex': 0,\n      'questions': deepCopy(this.questions)\n    });\n    this.state = Object.assign({}, this.initState);\n  }\n\n  resetGame() {\n    this.state = Object.assign({}, this.initState, {questions: deepCopy(this.questions)});\n  }\n\n  answer(...selectedIndexes) {\n    this.proceedCurrentAnswer(selectedIndexes);\n\n    if (this.currentQuestion.isUserAnswerCorrect) {\n      this.nextQuestion();\n    } else {\n      this.state.life = Math.max(0, this.state.life - 1);\n\n      if (this.state.life < 1) {\n        this.onFinishGame();\n      } else {\n        this.nextQuestion();\n      }\n    }\n  }\n\n  nextQuestion() {\n    this.state.currentIndex++;\n\n    if (this.state.currentIndex >= this.state.questions.length) {\n      this.onFinishGame();\n    } else {\n      this.onNextQuestion();\n    }\n  }\n\n  proceedCurrentAnswer(answerIndexes) {\n    const answers = this.currentQuestion.answers;\n    answerIndexes.forEach((item) => {\n      answers[item].isUserAnswer = true;\n    });\n\n    const correct = answers.findIndex((item, i) => item.valid && !item.isUserAnswer || !item.valid && item.isUserAnswer) < 0;\n    this.currentQuestion.isUserAnswerCorrect = correct;\n    return correct;\n  }\n\n  onFinishGame() {\n\n  }\n\n  onNextQuestion() {\n\n  }\n\n  load() {\n    return super.load(gameModelAdapter);\n  }\n}\n\nconst model = new GameModel();\nexport default model;\n","import gameModel from './game/game-model.js';\n\nconst USERNAME = `451989`;\nexport const SERVER_URL = `https://intensive-ecmascript-server-btfgudlkpi.now.sh/guess-melody/stats/${USERNAME}`;\n\nexport const gameInfo = Object.freeze({\n  'gameName': `Угадай Мелодию`,\n  'rules': `Правила просты&nbsp;— за&nbsp;${Math.round(gameModel.initState.time / 60)} минуты дать\n  максимальное количество правильных ответов.<br>\n  Удачи!`\n});\n","import AbstractView from '../view.js';\nimport {gameInfo} from '../data.js';\n\nexport default class WelcomeView extends AbstractView {\n\n  get template() {\n    return `<section class=\"main main--welcome\">\n      <section class=\"logo\" title=\"${gameInfo.gameName}\"><h1>${gameInfo.gameName}</h1></section>\n      <button class=\"main-play\">Начать игру</button>\n      <h2 class=\"title main-title\">Правила игры</h2>\n      <p class=\"text main-text\">\n        ${gameInfo.rules}      \n      </p>\n    </section>`;\n  }\n\n  bind() {\n    const button = this.element.querySelector(`.main-play`);\n    button.onclick = () => {\n      this.onStartClick();\n    };\n  }\n\n  onStartClick() {\n\n  }\n\n}\n","import WelcomeView from './welcome-view.js';\nimport application from '../application.js';\n\nclass WelcomePresenter {\n  constructor() {\n    this.view = new WelcomeView();\n  }\n\n  init() {\n    this.view.create();\n    this.view.show();\n    this.view.onStartClick = () => {\n      location.hash = application.ControllerId.GAME;\n    };\n\n    application.destroyTimerView();\n  }\n}\n\nexport default new WelcomePresenter();\n","import AbstractView from '../view.js';\nimport * as data from '../data.js';\n\nexport default class ResultFailView extends AbstractView {\n\n  constructor(stats) {\n    super();\n\n    this._stats = stats;\n  }\n\n  get template() {\n    return `<section class=\"main main--result\">\n        <section class=\"logo\" title=\"${data.gameInfo.gameName}\"><h1>${data.gameInfo.gameName}</h1></section>\n        <h2 class=\"title\">Вы настоящий меломан!</h2>\n        <div class=\"main-stat\">За&nbsp;${this.getTimeString()}<br>вы&nbsp;отгадали ${this._stats.answers}&nbsp;мелодии</div>\n        <span class=\"main-comparison\">Это&nbsp;лучше чем у&nbsp;${this._stats.percentHighscore}&nbsp;игроков</span>\n        <span role=\"button\" tabindex=\"0\" class=\"main-replay\">Сыграть ещё раз</span>\n      </section>`;\n  }\n\n  onRestartClick() {\n\n  }\n\n  bind() {\n    const screenDom = this.element;\n\n    const button = screenDom.querySelector(`.main-replay`);\n    button.onclick = () => {\n      this.onRestartClick();\n    };\n\n    return screenDom;\n  }\n\n  getTimeString() {\n    const time = this._stats.time;\n\n    const mins = Math.floor(time / 60);\n    const secs = time - (mins * 60);\n\n    if (mins) {\n      return `${mins} минуты ${secs} секунды`;\n    } else {\n      return `${secs} секунды`;\n    }\n  }\n}\n","import AbstractView from '../view.js';\nimport * as data from '../data.js';\n\nexport default class ResultFailView extends AbstractView {\n  get template() {\n    return `<section class=\"main main--result\">\n      <section class=\"logo\" title=\"${data.gameInfo.gameName}\"><h1>${data.gameInfo.gameName}</h1></section>\n        <h2 class=\"title\">Вы проиграли</h2>\n        <div class=\"main-stat\">Ничего, вам повезет в следующий раз</div>\n        <span role=\"button\" tabindex=\"0\" class=\"main-replay\">Сыграть ещё раз</span>\n      </section>`;\n  }\n\n  onRestartClick() {\n\n  }\n\n  bind() {\n    const screenDom = this.element;\n\n    const button = screenDom.querySelector(`.main-replay`);\n    button.onclick = () => {\n      this.onRestartClick();\n    };\n\n    return screenDom;\n  }\n}\n","import BaseModel from '../base-model.js';\nimport {BaseAdapter} from '../base-model.js';\nimport {SERVER_URL} from '../data.js';\n\n\nconst resultAdapter = new class extends BaseAdapter {\n  preprocess(data) {\n    if (!data) {\n      return [];\n    }\n\n    data.forEach((item, index) => {\n      if (!item.hasOwnProperty(`answers`) || !item.hasOwnProperty(`time`)) {\n        data.splice(index, 1);\n      }\n    });\n    return data;\n  }\n\n  toServer(data) {\n    return JSON.stringify(data);\n  }\n}();\n\nclass ResultModel extends BaseModel {\n  constructor() {\n    super();\n\n    this._stats = [];\n  }\n\n  get urlRead() {\n    return SERVER_URL;\n  }\n\n  get urlWrite() {\n    return SERVER_URL;\n  }\n\n  send(data) {\n    super.send(data, resultAdapter);\n  }\n\n  load() {\n    return super.load(resultAdapter);\n  }\n}\n\nexport default new ResultModel();\n","import SuccessView from './result-success-view.js';\nimport FailView from './result-fail-view.js';\nimport application from '../application.js';\nimport resultModel from './result-model.js';\n\nclass ResultPresenter {\n  init(userStat) {\n    if (userStat) {\n      resultModel.send(userStat);\n      this.view = new SuccessView(Object.assign({}, userStat, {percentHighscore: this.getPercentHighscore(userStat)}));\n\n    } else {\n      this.view = new FailView();\n    }\n\n    this.view.create();\n    this.view.show();\n\n    this.view.onRestartClick = () => {\n      location.hash = application.ControllerId.WELCOME;\n    };\n\n    application.destroyTimerView();\n  }\n\n  getPercentHighscore(userStat) {\n    userStat.isPlayerResult = true;\n\n    const serverStats = resultModel._stats;\n    serverStats.push(userStat);\n\n    serverStats.sort((a, b) => {\n      return b.answers - a.answers || a.time - b.time;\n    });\n\n    const playerIndex = serverStats.findIndex((item) => {\n      if (item.isPlayerResult) {\n        item.isPlayerResult = false;\n        return true;\n      }\n\n      return false;\n    });\n\n    const result = 100 - ((playerIndex) / serverStats.length) * 100;\n    return Math.floor(result) + `%`;\n  }\n}\nexport default new ResultPresenter();\n","const screenTemplate = () => `\n  <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"timer\" viewBox=\"0 0 780 780\">\n    <circle\n    cx=\"390\" cy=\"390\" r=\"370\"\n    class=\"timer-line\"\n    style=\"filter: url(.#blur); transform: rotate(-90deg) scaleY(-1); transform-origin: center\"></circle>\n  \n    <div class=\"timer-value\" xmlns=\"http://www.w3.org/1999/xhtml\">\n    <span class=\"timer-value-mins\"></span><!--\n      --><span class=\"timer-value-dots\">:</span><!--\n    --><span class=\"timer-value-secs\"></span>\n    </div>\n  </svg>`;\n\nexport default function getElement() {\n  const outer = document.createElement(`template`);\n  outer.innerHTML = screenTemplate();\n  return outer.content;\n}\n","import welcome from './welcome/welcome-presenter.js';\nimport game from './game/game-presenter.js';\nimport result from './result/result-presenter.js';\nimport model from './game/game-model.js';\nimport resultModel from './result/result-model.js';\nimport timer from './timer-view.js';\nimport * as utils from './utils.js';\n\nclass Application {\n  constructor() {\n    this.ControllerId = {\n      WELCOME: ``,\n      GAME: `game`,\n      RESULT: `result`\n    };\n\n    window.onhashchange = () => {\n      this.initLocation();\n    };\n\n    const preloaderRemove = this.showWelcome;\n\n    model.load()\n      .then((data) => this.setup(data))\n      .then(() => {\n        return resultModel.load();\n      }).catch(() => {\n        return [];\n      })\n      .then((stats) => {\n        resultModel._stats = stats;\n      }).then(() => {\n        return new Promise((resolve, reject) => {\n          // utils.preloadAudio(model.questions, resolve, reject);\n          resolve();\n        });\n      }).then(() => {\n        preloaderRemove();\n        this.initLocation();\n      })\n      .catch(window.console.error);\n  }\n\n  setup(questions) {\n    model.questions = questions;\n\n    this._routes = {\n      [this.ControllerId.WELCOME]: welcome,\n      [this.ControllerId.GAME]: game,\n      [this.ControllerId.RESULT]: result\n    };\n  }\n\n  init() {\n\n  }\n\n  initTimerView(time) {\n    const appDiv = document.querySelector(`.timer`);\n    appDiv.appendChild(timer());\n\n    this.timerStopFunction = window.initializeCountdown(time);\n  }\n\n  destroyTimerView() {\n    const appDiv = document.querySelector(`.timer`);\n    appDiv.innerHTML = ``;\n\n    if (this.timerStopFunction) {\n      this.timerStopFunction();\n    }\n  }\n\n  showWelcome() {\n    welcome.init();\n  }\n\n  showGame() {\n    game.init();\n  }\n\n  initLocation() {\n    const params = this.getJSONHashString(location.hash);\n\n    this.changeController(this.getRawHashString(location.hash), params);\n  }\n\n  getRawHashString(hash) {\n    let returnString = hash.replace(`#`, ``);\n\n    const index = hash.indexOf(`=`);\n    if (index > 0) {\n      returnString = returnString.substr(0, index - 1);\n    }\n\n    return returnString;\n  }\n\n  getJSONHashString(hash) {\n    let returnString = hash.replace(`#`, ``);\n    const index = hash.indexOf(`=`);\n\n    if (index > 0) {\n      returnString = returnString.substr(index);\n    }\n\n    try {\n      return JSON.parse(returnString);\n    } catch (error) {\n      return null;\n    }\n  }\n\n  changeController(route = ``, params) {\n    const controller = this._routes[route];\n    game.destroy();\n\n    if (controller) {\n      controller.init(params);\n    } else {\n      this.showWelcome();\n    }\n  }\n}\n\nexport default new Application();\n","import GenreView from './game-genre-view.js';\nimport ArtistView from './game-artist-view.js';\nimport gameModel from './game-model.js';\nimport application from '../application.js';\n\nclass GamePresenter {\n\n  constructor(model) {\n    this._model = model;\n  }\n\n  init() {\n    switch (this._model.currentQuestion.type) {\n      case this._model.QuestionType.ARTIST:\n        this.view = new ArtistView(this._model.currentQuestion);\n        break;\n      case this._model.QuestionType.GENRE:\n        this.view = new GenreView(this._model.currentQuestion);\n        break;\n    }\n\n    this.view.create();\n    this.view.show();\n    this.view.onAnswer = (...answerIndexes) => this._model.answer(...answerIndexes);\n\n    this._model.onNextQuestion = () => {\n      application.showGame();\n    };\n\n    this._model.onFinishGame = () => {\n      if (this._model.isFail) {\n        location.hash = application.ControllerId.RESULT;\n      } else {\n        location.hash = `${application.ControllerId.RESULT}=${JSON.stringify(this._model._stats)}`;\n      }\n\n      this.destroy();\n    };\n\n    if (this._model.state.currentIndex === 0) {\n      application.initTimerView(this._model.timeLeft);\n\n      this.timer = setInterval(() =>\n          this.updateTimer()\n        , 1000);\n    }\n  }\n\n  destroy() {\n    clearInterval(this.timer);\n    this._model.resetGame();\n  }\n\n  updateTimer() {\n    this._model.timeLeft--;\n  }\n}\n\nexport default new GamePresenter(gameModel);\n\n"],"names":["AbstractView","createElement","template","_element","render","bind","outer","document","innerHTML","content","mainScreen","querySelector","appendChild","element","Error","create","GameGenreView","question","_question","index","answer","screenDom","answers","Array","prototype","slice","call","querySelectorAll","answerButton","playerWrappers","forEach","item","i","addEventListener","event","preventDefault","currentAudio","pause","initializePlayer","file","checkbox","answerClickHandler","disabled","onclick","answerIndexes","array","checked","push","onAnswer","data","toLowerCase","map","createSong","GameArtistView","image","artistName","player","artistSong","wrapperElement","currentTarget","value","createAnswer","deepCopy","object","JSON","parse","stringify","BaseAdapter","new","target","defaultAdapter","BaseModel","adapter","fetch","urlRead","then","resp","json","preprocess","requestSettings","toServer","urlWrite","onUpload","gameModelAdapter","type","src","proceedArtistAnswers","proceedGenreAnswers","genre","valid","isCorrect","title","url","correctGenre","GameModel","state","questions","reduce","sum","isUserAnswerCorrect","initState","time","onFinishGame","life","currentIndex","stats","correctAnswers","gameTime","timeLeft","lifes","QuestionType","Object","freeze","assign","selectedIndexes","proceedCurrentAnswer","currentQuestion","nextQuestion","Math","max","length","onNextQuestion","isUserAnswer","correct","findIndex","model","USERNAME","SERVER_URL","gameInfo","round","gameModel","WelcomeView","button","onStartClick","gameName","rules","WelcomePresenter","view","show","hash","application","ControllerId","GAME","destroyTimerView","ResultFailView","_stats","onRestartClick","mins","floor","secs","getTimeString","percentHighscore","resultAdapter","hasOwnProperty","splice","ResultModel","ResultPresenter","userStat","send","SuccessView","getPercentHighscore","FailView","WELCOME","isPlayerResult","serverStats","resultModel","sort","a","b","playerIndex","result","screenTemplate","getElement","Application","onhashchange","initLocation","preloaderRemove","showWelcome","load","setup","catch","Promise","resolve","reject","window","console","error","_routes","welcome","game","RESULT","appDiv","timer","timerStopFunction","initializeCountdown","init","params","getJSONHashString","location","changeController","getRawHashString","returnString","replace","indexOf","substr","route","controller","destroy","GamePresenter","_model","ARTIST","ArtistView","GENRE","GenreView","showGame","isFail","initTimerView","setInterval","updateTimer","resetGame"],"mappings":"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"}